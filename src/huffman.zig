pub const HuffmanCode = struct {
    code: u32,
    bits: u8,
};

// If character is not in our static table, generate a code
// This is a simplified but functional approach maybe?
pub fn calculateHuffmanCode(c: u8) HuffmanCode {
    if (c >= 'a' and c <= 'z') {
        return .{
            .code = @as(u32, c - 'a' + 0x24),
            .bits = 6,
        };
    }
    if (c >= 'A' and c <= 'Z') {
        return .{
            .code = @as(u32, c - 'A' + 0x40),
            .bits = 7,
        };
    }
    if (c >= '0' and c <= '9') {
        return .{
            .code = @as(u32, c - '0' + 0xe8),
            .bits = 8,
        };
    }

    return .{
        .code = @as(u32, c) | 0x1000,
        .bits = 13,
    };
}

pub const huffman_table = [256]HuffmanCode{
    .{ .code = 0x1ff8, .bits = 13 },
    .{ .code = 0x7fffd8, .bits = 23 },
    .{ .code = 0x7fffd9, .bits = 23 },
    .{ .code = 0x7fffd, .bits = 19 },
    .{ .code = 0x7fffda, .bits = 23 },
    .{ .code = 0x7fffdb, .bits = 23 },
    .{ .code = 0x7fffdc, .bits = 23 },
    .{ .code = 0x7fffdd, .bits = 23 },
    .{ .code = 0x7fffde, .bits = 23 },
    .{ .code = 0x7fffdf, .bits = 23 },
    .{ .code = 0x7fffe0, .bits = 23 },
    .{ .code = 0x7fffe1, .bits = 23 },
    .{ .code = 0x7fffe2, .bits = 23 },
    .{ .code = 0x7fffe3, .bits = 23 },
    .{ .code = 0x7fffe4, .bits = 23 },
    .{ .code = 0x7fffe5, .bits = 23 },
    .{ .code = 0x7fffe6, .bits = 23 },
    .{ .code = 0x7fffe7, .bits = 23 },
    .{ .code = 0x7fffe8, .bits = 23 },
    .{ .code = 0x7fffe9, .bits = 23 },
    .{ .code = 0x7fffea, .bits = 23 },
    .{ .code = 0x7fffeb, .bits = 23 },
    .{ .code = 0x7fffec, .bits = 23 },
    .{ .code = 0x7fffed, .bits = 23 },
    .{ .code = 0x7fffee, .bits = 23 },
    .{ .code = 0x7fffef, .bits = 23 },
    .{ .code = 0x7ffff0, .bits = 23 },
    .{ .code = 0x7ffff1, .bits = 23 },
    .{ .code = 0x7ffff2, .bits = 23 },
    .{ .code = 0x7ffff3, .bits = 23 },
    .{ .code = 0x7ffff4, .bits = 23 },
    .{ .code = 0x7ffff5, .bits = 23 },
    .{ .code = 0xf8, .bits = 8 },
    .{ .code = 0x7fc, .bits = 11 },
    .{ .code = 0x3ffc, .bits = 14 },
    .{ .code = 0x7ffc, .bits = 15 },
    .{ .code = 0x3fa, .bits = 10 },
    .{ .code = 0x7fa, .bits = 11 },
    .{ .code = 0x3fb, .bits = 10 },
    .{ .code = 0x3fc, .bits = 10 },
    .{ .code = 0x7fb, .bits = 11 },
    .{ .code = 0x3fd, .bits = 10 },
    .{ .code = 0x7fd, .bits = 11 },
    .{ .code = 0x7fe, .bits = 11 },
    .{ .code = 0x7ff, .bits = 11 },
    .{ .code = 0x3fe, .bits = 10 },
    .{ .code = 0x3ff, .bits = 10 },
    .{ .code = 0x1f, .bits = 5 },
    .{ .code = 0xe8, .bits = 8 },
    .{ .code = 0xe9, .bits = 8 },
    .{ .code = 0xea, .bits = 8 },
    .{ .code = 0xeb, .bits = 8 },
    .{ .code = 0xec, .bits = 8 },
    .{ .code = 0xed, .bits = 8 },
    .{ .code = 0xee, .bits = 8 },
    .{ .code = 0xef, .bits = 8 },
    .{ .code = 0xf0, .bits = 8 },
    .{ .code = 0xf1, .bits = 8 },
    .{ .code = 0xf2, .bits = 8 },
    .{ .code = 0xf3, .bits = 8 },
    .{ .code = 0xf4, .bits = 8 },
    .{ .code = 0xf5, .bits = 8 },
    .{ .code = 0xf6, .bits = 8 },
    .{ .code = 0xf7, .bits = 8 },
    .{ .code = 0xf9, .bits = 8 },
    .{ .code = 0x7fa, .bits = 11 },
    .{ .code = 0x7fb, .bits = 11 },
    .{ .code = 0xffc, .bits = 12 },
    .{ .code = 0xffd, .bits = 12 },
    .{ .code = 0x7fc, .bits = 11 },
    .{ .code = 0xffe, .bits = 12 },
    .{ .code = 0x7fd, .bits = 11 },
    .{ .code = 0x7fe, .bits = 11 },
    .{ .code = 0x7ff, .bits = 11 },
    .{ .code = 0xfff, .bits = 12 },
    .{ .code = 0x1fc0, .bits = 13 },
    .{ .code = 0x1fc1, .bits = 13 },
    .{ .code = 0x1fc2, .bits = 13 },
    .{ .code = 0x1fc3, .bits = 13 },
    .{ .code = 0x1fc4, .bits = 13 },
    .{ .code = 0x1fc5, .bits = 13 },
    .{ .code = 0x1fc6, .bits = 13 },
    .{ .code = 0x1fc7, .bits = 13 },
    .{ .code = 0x1fc8, .bits = 13 },
    .{ .code = 0x1fc9, .bits = 13 },
    .{ .code = 0x1fca, .bits = 13 },
    .{ .code = 0x1fcb, .bits = 13 },
    .{ .code = 0x1fcc, .bits = 13 },
    .{ .code = 0x1fcd, .bits = 13 },
    .{ .code = 0x1fce, .bits = 13 },
    .{ .code = 0x1fcf, .bits = 13 },
    .{ .code = 0x1fd0, .bits = 13 },
    .{ .code = 0x1fd1, .bits = 13 },
    .{ .code = 0x1fd2, .bits = 13 },
    .{ .code = 0x1fd3, .bits = 13 },
    .{ .code = 0x1fd4, .bits = 13 },
    .{ .code = 0x1fd5, .bits = 13 },
    .{ .code = 0x24, .bits = 6 },
    .{ .code = 0x25, .bits = 6 },
    .{ .code = 0x26, .bits = 6 },
    .{ .code = 0x27, .bits = 6 },
    .{ .code = 0x28, .bits = 6 },
    .{ .code = 0x29, .bits = 6 },
    .{ .code = 0x2a, .bits = 6 },
    .{ .code = 0x2b, .bits = 6 },
    .{ .code = 0x2c, .bits = 6 },
    .{ .code = 0x2d, .bits = 6 },
    .{ .code = 0x2e, .bits = 6 },
    .{ .code = 0x2f, .bits = 6 },
    .{ .code = 0x30, .bits = 6 },
    .{ .code = 0x31, .bits = 6 },
    .{ .code = 0x32, .bits = 6 },
    .{ .code = 0x33, .bits = 6 },
    .{ .code = 0x34, .bits = 6 },
    .{ .code = 0x35, .bits = 6 },
    .{ .code = 0x36, .bits = 6 },
    .{ .code = 0x37, .bits = 6 },
    .{ .code = 0x38, .bits = 6 },
    .{ .code = 0x39, .bits = 6 },
    .{ .code = 0x3a, .bits = 6 },
    .{ .code = 0x3b, .bits = 6 },
    .{ .code = 0x3c, .bits = 6 },
    .{ .code = 0x3d, .bits = 6 },
    .{ .code = 0x3e, .bits = 6 },
    .{ .code = 0x3f, .bits = 6 },
    .{ .code = 0x40, .bits = 6 },
    .{ .code = 0x41, .bits = 6 },
    .{ .code = 0x42, .bits = 6 },
    .{ .code = 0x7fffff0, .bits = 23 },
    .{ .code = 0x7fffff1, .bits = 23 },
    .{ .code = 0x7fffff2, .bits = 23 },
    .{ .code = 0x7fffff3, .bits = 23 },
    .{ .code = 0x7fffff4, .bits = 23 },
    .{ .code = 0x7fffff5, .bits = 23 },
    .{ .code = 0x7fffff6, .bits = 23 },
    .{ .code = 0x7fffff7, .bits = 23 },
    .{ .code = 0x7fffff8, .bits = 23 },
    .{ .code = 0x7fffff9, .bits = 23 },
    .{ .code = 0x7fffffa, .bits = 23 },
    .{ .code = 0x7fffffb, .bits = 23 },
    .{ .code = 0x7fffffc, .bits = 23 },
    .{ .code = 0x7fffffd, .bits = 23 },
    .{ .code = 0x7fffffe, .bits = 23 },
    .{ .code = 0x7ffffff, .bits = 23 },
    .{ .code = 0x3ffff80, .bits = 22 },
    .{ .code = 0x3ffff81, .bits = 22 },
    .{ .code = 0x3ffff82, .bits = 22 },
    .{ .code = 0x3ffff83, .bits = 22 },
    .{ .code = 0x3ffff84, .bits = 22 },
    .{ .code = 0x3ffff85, .bits = 22 },
    .{ .code = 0x3ffff86, .bits = 22 },
    .{ .code = 0x3ffff87, .bits = 22 },
    .{ .code = 0x3ffff88, .bits = 22 },
    .{ .code = 0x3ffff89, .bits = 22 },
    .{ .code = 0x3ffff8a, .bits = 22 },
    .{ .code = 0x3ffff8b, .bits = 22 },
    .{ .code = 0x3ffff8c, .bits = 22 },
    .{ .code = 0x3ffff8d, .bits = 22 },
    .{ .code = 0x3ffff8e, .bits = 22 },
    .{ .code = 0x3ffff8f, .bits = 22 },
    .{ .code = 0x3ffff90, .bits = 22 },
    .{ .code = 0x3ffff91, .bits = 22 },
    .{ .code = 0x3ffff92, .bits = 22 },
    .{ .code = 0x3ffff93, .bits = 22 },
    .{ .code = 0x3ffff94, .bits = 22 },
    .{ .code = 0x3ffff95, .bits = 22 },
    .{ .code = 0x3ffff96, .bits = 22 },
    .{ .code = 0x3ffff97, .bits = 22 },
    .{ .code = 0x3ffff98, .bits = 22 },
    .{ .code = 0x3ffff99, .bits = 22 },
    .{ .code = 0x3ffff9a, .bits = 22 },
    .{ .code = 0x3ffff9b, .bits = 22 },
    .{ .code = 0x3ffff9c, .bits = 22 },
    .{ .code = 0x3ffff9d, .bits = 22 },
    .{ .code = 0x3ffff9e, .bits = 22 },
    .{ .code = 0x3ffff9f, .bits = 22 },
    .{ .code = 0x3ffffa0, .bits = 22 },
    .{ .code = 0x3ffffa1, .bits = 22 },
    .{ .code = 0x3ffffa2, .bits = 22 },
    .{ .code = 0x3ffffa3, .bits = 22 },
    .{ .code = 0x3ffffa4, .bits = 22 },
    .{ .code = 0x3ffffa5, .bits = 22 },
    .{ .code = 0x3ffffa6, .bits = 22 },
    .{ .code = 0x3ffffa7, .bits = 22 },
    .{ .code = 0x3ffffa8, .bits = 22 },
    .{ .code = 0x3ffffa9, .bits = 22 },
    .{ .code = 0x3ffffaa, .bits = 22 },
    .{ .code = 0x3ffffab, .bits = 22 },
    .{ .code = 0x3ffffac, .bits = 22 },
    .{ .code = 0x3ffffad, .bits = 22 },
    .{ .code = 0x3ffffae, .bits = 22 },
    .{ .code = 0x3ffffaf, .bits = 22 },
    .{ .code = 0x3ffffb0, .bits = 22 },
    .{ .code = 0x3ffffb1, .bits = 22 },
    .{ .code = 0x3ffffb2, .bits = 22 },
    .{ .code = 0x3ffffb3, .bits = 22 },
    .{ .code = 0x3ffffb4, .bits = 22 },
    .{ .code = 0x3ffffb5, .bits = 22 },
    .{ .code = 0x3ffffb6, .bits = 22 },
    .{ .code = 0x3ffffb7, .bits = 22 },
    .{ .code = 0x3ffffb8, .bits = 22 },
    .{ .code = 0x3ffffb9, .bits = 22 },
    .{ .code = 0x3ffffba, .bits = 22 },
    .{ .code = 0x3ffffbb, .bits = 22 },
    .{ .code = 0x3ffffbc, .bits = 22 },
    .{ .code = 0x3ffffbd, .bits = 22 },
    .{ .code = 0x3ffffbe, .bits = 22 },
    .{ .code = 0x3ffffbf, .bits = 22 },
    .{ .code = 0x3ffffc0, .bits = 22 },
    .{ .code = 0x3ffffc1, .bits = 22 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
    .{ .code = 0, .bits = 0 },
};
